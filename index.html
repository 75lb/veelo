<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>Handbraker - Video Library Optimisation with Handbrake</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
	<link rel="stylesheet" href="css/main.css">
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body data-spy="scroll" data-target=".toc">
  <div class="container">
    <div class="row">
      <div class="span2 toc">
        <ul class="nav nav-list" data-spy="affix">
          <li class="nav-header">
            <a href="#handbraker">Handbraker</a>
          </li>
          <li><a href="#synopsis">Synopsis</a></li>
          <li class="nav-header">
            <a href="#install">Install</a>
          </li>
          <li><a href="#install-winmac">Windows / Mac</a></li>
          <li><a href="#install-ubuntu">Ubuntu Linux</a></li>
          <li><a href="#install-other">Other</a></li>
          <li><a href="#update">Update</a></li>
          
          <li class="nav-header">
            <a href="#usage">Usage</a>
          </li>
          <li><a href="#usage-handbrake">HandbrakeCLI Options</a></li>
          <li><a href="#usage-ext">Output File Extension</a></li>
          <li><a href="#usage-archive">Archive Originals</a></li>
          <li><a href="#usage-output-dir">Specify Output Dir</a></li>
          <li><a href="#usage-recurse">Recurse</a></li>
          <li><a href="#usage-dry-run">Dry Run</a></li>
          <li><a href="#usage-embed-srt">Embedding Subtitles</a></li>

          <li class="nav-header">
            <a href="#config">Configuration</a>
          </li>
          <li><a href="#config-defaults">Defaults</a></li>

          <li class="nav-header">
            <a href="#examples">More Examples</a>
          </li>
          <li><a href="#examples-samples">Make Samples</a></li>
        </ul>
      </div>
      <div class="span10">
      	<article id="documentation"><p><span id="handbraker"></span>
</p>
<h1>Handbraker</h1>
<p><a href="https://travis-ci.org/75lb/handbraker"><img src="https://travis-ci.org/75lb/handbraker.png" alt="Build Status"></a>

</p>
<p>Requiring properiatary media players or plugins to play video is annoying. Video refusing to play on expensive, modern TVs and mobile devices is aggravating. Well, optimise your video library - consolidate the mixture of legacy and proprietary formats down to a single, modern format which works everywhere (<a href="http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC">H.264/MPEG-4 AVC</a>).

</p>
<p>Handbraker, a command-line Video Library Optimisation tool built on top of the outstanding encoder Handbrake, was built for this task.

</p>
<p>Works on <strong>Windows</strong>, <strong>Linux</strong> and <strong>Mac OSX</strong>.

</p>
<p><span id="synopsis"></span>
</p>
<h2>Synopsis</h2>
<pre><code>$ handbraker --recurse Boxing --exclude Tyson
[18:34:43] queue length: 158
[18:34:43] file types: .m4v(16) .avi(91) .wmv(2) .mp4(7) .mpg(23) .mkv(18) .m2ts(1)
[18:34:43] processing: <strong>Boxing/Eubank/Chris Eubank vs Nigel Benn.avi</strong>
Encoding: 0.71 % (70.07 fps, avg 78.30 fps, ETA 00h22m37s)</code></pre>

<p><span id="install"></span>
</p>
<h1>Install</h1>
<p>First ensure <a href="http://nodejs.org">node.js</a> is installed. Visit <a href="http://nodejs.org/download/">their download page</a> to find the correct installer for your system.

</p>
<p>Then, at the command line enter:

</p>
<p><span id="install-winmac"></span>
</p>
<h2>Windows &amp; Mac OS X</h2>
<pre><code>$ npm -g install handbraker</code></pre>
<p><em>some older Mac operating systems may require running the above with <code>sudo</code></em> 

</p>
<p><span id="install-ubuntu"></span>
</p>
<h2>Ubuntu Linux</h2>
<pre><code>$ sudo npm -g install handbraker
$ sudo npm -g run-script handbraker ubuntu-setup</code></pre>
<p>(the second step above installs the <a href="https://launchpad.net/~stebbins/+archive/handbrake-releases">official Ubuntu Handbrake package</a>).

</p>
<p><span id="install-other"></span>
</p>
<h2>Other Platforms</h2>
<p>Other platform users must manually ensure <code>HandbrakeCLI</code> is installed on their PATH. Check the <a href="http://handbrake.fr/downloads2.php">official website</a> to see if a release is available for your system. 

</p>
<p><span id="update"></span>
</p>
<h2>Update</h2>
<p>If you already have handbraker installed, double-check you have the latest version: 

</p>
<pre><code>$ sudo npm update -g handbraker</code></pre>
<p><span id="usage"></span>
</p>
<h1>Usage</h1>
<p>A quick summary of the options can be displayed with the <code>--help</code> option:

</p>
<pre><code>$ handbraker --help

Usage: handbraker [options] [HandbrakeCLI options] [files]

### Handbraker Options-------------------------------------------------------
        --ext                  Output file extension. Choose &#39;mp4&#39;, &#39;m4v&#39; or &#39;mkv&#39; (default: m4v)
        --archive              Archive the original file in a &#39;handbraker-originals&#39; directory
        --output-dir           Outputs to the specified directory
        --preserve-dates       Preserve input&#39;s &#39;modified&#39; and &#39;accessed&#39; times on the output file
        --recurse              Traverse into directories
        --include              Regex include filter, for use with --recurse
        --exclude              Regex exclude filter, for use with --recurse
        --dry-run              Describe the outcome without performing the actual work
        --embed-srt            If a matching .srt file exists, embed subtitles into the output video
    -v, --verbose              Show detailed output
    -h, --help                 Show this help
        --hbhelp               Show this help plus all HandbrakeCLI options</code></pre>
<p><span id="usage-handbrake"></span>
</p>
<h2>Specifiy HandbrakeCLI Options</h2>
<p>If you are fimilar with Handbrake, and/or want more control over the encoder settings, run this command to view the <a href="https://trac.handbrake.fr/wiki/CLIGuide">full range of Handbrake options</a>:

</p>
<pre><code>$ handbraker --hbhelp</code></pre>
<p>Where specified, these options are passed directly to the underlying Handbrake encoder.

</p>
<p><span id="usage-ext"></span>
</p>
<h2>Set Output File Extension</h2>
<p>By default, handbraker will output media in a MP4 container using the &quot;.m4v&quot; file extension (plays well with all media players, particularly iTunes/Quicktime). If you prefer to output the MKV container format, use <code>--ext mkv</code>.

</p>
<p><span id="usage-archive"></span>
</p>
<h2>Archive your originals</h2>
<p>Handbraker does not delete or modify your original files, it leaves them where they are. After processing, if you would like the original files moved into a directory convenient for archiving or discarding set the <code>--archive</code> flag. For example, the following files: 

</p>
<pre><code>.
├── rain.mov
└── video.mov</code></pre>

<p>after processing would be arranged like so: 

</p>
<pre><code>.
├── handbraker-originals
│   ├── rain.mov
│   └── video.mov
├── rain.m4v
└── video.m4v</code></pre>

<p><span id="usage-output-dir"></span>
</p>
<h2>Specify an Output Directory</h2>
<p>By default, handbraker outputs in the same directory as the input file. You can output to a sub-directory of each input file by passing <code>--output-dir &lt;directory&gt;</code>. For example, with this directory structure:

</p>
<pre><code>.
├── Jan
│   └── Manchester.mov
└── Feb
    └── Liverpool.mov</code></pre>

<p>running <code>$ handbraker */*.mov --output-dir optimised</code> would output: 

</p>
<pre><code>.
├── Jan
│   ├── Manchester.mov
│   └── optimised
│       └── Manchester.m4v
└── Feb
    ├── Liverpool.mov
    └── optimised
        └── Liverpool.m4v</code></pre>

<p>If you specify an absolute <code>--output-dir</code> path, or a path beginning with &quot;.&quot; or &quot;..&quot;, output will be directed to a single, specific directory. So, running <code>$ handbraker */*.mov --output-dir ./optimised</code> would output: 

</p>
<pre><code>.
├── Jan
│   └── Manchester.mov
├── Feb
│   └── Liverpool.mov
└── optimised
    ├── Jan
    │   └── Manchester.m4v
    └── Feb
        └── Liverpool.m4v</code></pre>

<p><span id="usage-recurse"></span>
</p>
<h2>Recurse</h2>
<p>By default, Handbraker ignore directories. If you wish to traverse into directories, processing the entire tree, use <code>--recurse</code>. 

</p>
<p>With large directory trees, control which files are processed using <code>--include</code> and <code>--exclude</code> filters. Both these options accept Regular Expressions. For example, to only process <code>wmv</code> and <code>avi</code> files:

</p>
<pre><code>$ handbraker --recurse Sport --include &quot;\.wmv|\.avi&quot;</code></pre>
<p><span id="usage-dry-run"></span>
</p>
<h2>Dry Run</h2>
<p>To see a report of what will or will not be processed, <em>without</em> performing any work, pass <code>--dry-run</code>. This is a useful verification step before processing a large batch.

</p>
<p><span id="usage-embed-srt"></span>
</p>
<h2>Embedding Subtitles</h2>
<p>If videos in your batch have external SRT subtitle files, you can embed them automatically by passing <code>--embed-srt</code>.

</p>
<pre><code>$ handbraker Film/World/* --embed-srt</code></pre>
<p><em>Known Issue</em>: Handbrake does not accept SRT filenames containing a comma (the comma is a reserved delimiter character for the <code>--srt-file</code> option). 

</p>
<p><span id="config"></span>
</p>
<h1>Configuration</h1>
<p>The Handbraker configuration file is stored at <code>~/.handbraker</code> on Mac and Linux, <code>%USERPROFILE%\Application Data</code> on Windows XP and <code>%USERPROFILE%\AppData\Roaming</code> on Windows Vista and later. It must remain <a href="http://jsonlint.com">valid JSON</a>. 

</p>
<p>The initial config file looks like this: 

</p>
<pre><code>{
    &quot;defaults&quot;: {
        &quot;handbrake&quot;: {
            &quot;preset&quot;: &quot;Normal&quot;,
            &quot;optimize&quot;: true,
            &quot;srt-codeset&quot;: &quot;UTF-8&quot;, 
            &quot;srt-lang&quot;: &quot;eng&quot;
        },
        &quot;handbraker&quot;: {
            &quot;ext&quot;: &quot;m4v&quot;,
            &quot;preserve-dates&quot;: true,
            &quot;ignoreList&quot;: [&quot;.DS_Store&quot;],
            &quot;archiveDirectory&quot;: &quot;handbraker-originals&quot;
        }
    }
}</code></pre>
<p><span id="config-defaults"></span>
</p>
<h2>Defaults</h2>
<p>Handbraker ships with the &quot;Normal&quot; Handbrake preset set as default. This preset maintains the quality, dimensions and frame rate of the original. You can personalise your defaults in the config file. Options passed on the command line override their corresponding defaults.

</p>
<h2>Ignore List</h2>
<p>Manage the list of files Handbraker should ignore, e.g. &quot;Thumbs.db&quot;, &quot;.DS_Store&quot; etc.

</p>
<p><span id="examples"></span>
</p>
<h1>More Examples</h1>
<p>More usage examples 

</p>
<p><span id="examples-samples"></span>
</p>
<h2>Make Samples</h2>
<p>To test the water, you want to encode a small sample of each video in the &quot;Comedy&quot; directory. Use the Handbrake options <code>--start-at</code> and <code>--stop-at</code>. For example, create samples beginning at the 60th second lasting for 120 seconds, outputing each into a <code>samples</code> sub-directory:

</p>
<pre><code>$ handbraker Comedy/* --start-at duration:60 --stop-at duration:120 --output-dir samples</code></pre>
<p>If sound quality is important, encode with a higher audio bitrate (e.g. 256kb/s):

</p>
<pre><code>$ handbraker Concert.wmv --ab 256</code></pre>
<p>Say your source media contains audio and subtitle tracks in several languages. You are interested in keeping just the Japanese audio and English subtitles. First scan the source media to find the ID numbers of the audio/subtitle tracks you wish to keep:

</p>
<pre><code>$ handbraker -t 0 TokyoStory.mkv</code></pre>
<p>In the output you&#39;ll see something like this: 

</p>
<pre><code>+ audio tracks:
  + 1, Russian (AC3) (2.0 ch) (iso639-2: rus), 48000Hz, 192000bps
  + 2, Russian (AC3) (2.0 ch) (iso639-2: rus), 48000Hz, 192000bps
  + 3, Japanese (AC3) (2.0 ch) (iso639-2: jpn), 48000Hz, 192000bps
+ subtitle tracks:
  + 1, Russian (iso639-2: rus) (Text)(UTF-8)
  + 2, English (iso639-2: eng) (Text)(UTF-8)</code></pre>
<p>So, we&#39;ll transcode taking audio track 3 and subtitle track 2:

</p>
<pre><code>$ handbraker TokyoStory.mkv --audio 3 --subtitle 2</code></pre>
<p>Use <code>--quality</code> to adjust the compression quality of the output. 20 is the optimum value, between 35 and 40 will give a conveniently small output file whilst remaining watchable - useful for email attachment:

</p>
<pre><code>$ handbraker campaign.mov --quality 35</code></pre>
<h2>Presets</h2>
<p>Handbrake comes with a collection of <a href="https://trac.handbrake.fr/wiki/BuiltInPresets">built-in presets</a>, optimised for common scenarios and specific devices. View the list using: 

</p>
<pre><code>$ handbraker --preset-list</code></pre>
<p>To encode video optimised for iPod, you might use: 

</p>
<pre><code>$ handbraker --preset iPod video1.mov video2.mov</code></pre>
<h1>Contributing</h1>
<p>Patches welcome. There are a few features that would be nice to have, if you fancy implementing them: 

</p>
<ul>
<li>a web frontend</li>
<li>live queue management</li>
<li>user-defined presets </li>
</ul>
<p>Please file bugs or feature requests on the <a href="https://github.com/75lb/handbraker/issues?state=open">Issue List</a>.

</p>
<h2>Developer install</h2>
<pre><code>$ git clone https://github.com/75lb/handbraker.git
$ cd handbraker
$ npm link</code></pre>
<p>From there, the <code>handbraker</code> command will point to your checkout. If you make some changes, check everything still works by running the test suite: 

</p>
<pre><code>$ npm test</code></pre>
<h1>DVD Copy Protection</h1>
<p>You can use handbraker to rip DVDs but it <em>does not crack DVD copy protection</em>. Use a specialised DVD ripper for this. 

</p>
<h1>License</h1>
<p>(c) 2012, Lloyd Brookes <a href="&#x6d;&#97;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#x37;&#x35;&#112;&#111;&#117;&#110;&#x64;&#64;&#103;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#111;&#x6d;">&#x37;&#x35;&#112;&#111;&#117;&#110;&#x64;&#64;&#103;&#x6d;&#x61;&#105;&#x6c;&#46;&#x63;&#111;&#x6d;</a>
(MIT License)</p>
</article>
      </div>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.3.min.js"><\/script>')</script>
  <script src="js/vendor/bootstrap.min.js"></script>
  <!-- // <script src="js/vendor/prettify.js"></script> -->
   
  <!-- // <script src="js/main.js"></script> -->

	<script>
		var _gaq=[['_setAccount','UA-27725889-5'],['_trackPageview']];
		(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
		g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g,s)}(document,'script'));
	</script>
</body>
</html>
